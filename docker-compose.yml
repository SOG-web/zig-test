version: "3.8"

services:
  # ============================================================
  # Reps Server Application
  # ============================================================
  reps_server:
    build:
      context: .
      dockerfile: Dockerfile
      no_cache: true
    container_name: vendor_server_app
    restart: unless-stopped
    pull_policy: build
    env_file:
      - .env
    environment:
      # Database Configuration
      DB_HOST: ${DB_HOST}
      DB_PORT: ${DB_PORT}
      DB_USER: ${DB_USER}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      DB_POOL_SIZE: ${DB_POOL_SIZE}

      # Server Configuration
      SERVER_PORT: ${SERVER_PORT}

      # CORS Configuration
      CORS_ORIGIN: ${CORS_ORIGIN}
      CORS_HEADERS: ${CORS_HEADERS}
      CORS_METHODS: ${CORS_METHODS}
      CORS_MAX_AGE: ${CORS_MAX_AGE}
      CORS_CREDENTIALS: ${CORS_CREDENTIALS}

      # Auth Server Configuration
      AUTH_SERVER_URL: ${AUTH_SERVER_URL}
      AUTH_SERVER_SECRET: ${AUTH_SERVER_SECRET}

      # Notification Server Configuration
      NOTIFICATION_API_URL: ${NOTIFICATION_API_URL}
      NOTIFICATION_API_KEY: ${NOTIFICATION_API_KEY}
    ports:
      - "${SERVER_PORT}:${SERVER_PORT}"

networks:
  reps_network:
    driver: bridge
